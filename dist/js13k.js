function lerp(t,e,i){return(1-i)*t+i*e}function fade(t,e,i,a){var s=10,n=a/s,h=1/n,c=0,r=setInterval(function(){c>=1&&clearInterval(r);var a=Math.round(lerp(e.r,i.r,c)),s=Math.round(lerp(e.g,i.g,c)),n=Math.round(lerp(e.b,i.b,c));t.color={r:a,g:s,b:n},c+=h},s);return r}function getRGBText(t){return"rgb("+t.r+","+t.g+","+t.b+")"}function eventWindowLoaded(){var t=document.getElementById("canvas13K");t.width=window.innerWidth,t.height=window.innerHeight;var e=new Game;e.init()}var Circle=function(t,e,i,a,s,n,h,c){var t=t,e=e,i=i,a=a,h=h,s=s,n=n,c=c,r=2*Math.PI*e,l=r/(c/33),o={x:0,y:0,speed:360/(r/l)*(Math.PI/180)},u=Math.pow(i+(e-(h-h/2))-i,2),d=Math.sqrt(u),f=Math.pow(i+(e+(h-h/2))-i,2),v=Math.sqrt(f),g=null;this.draw=function(){t.beginPath(),t.strokeStyle=getRGBText(n),t.lineWidth=h,t.arc(i,a,e,0,2*Math.PI,!0),t.stroke(),t.closePath(),o.x=i+Math.cos(s)*e,o.y=a+Math.sin(s)*e,s+=o.speed,t.fillStyle=getRGBText(n),t.beginPath(),t.arc(o.x,o.y,15,0,2*Math.PI,!0),t.closePath(),t.fill()},this.checkClick=function(t,e){var s=Math.pow(i-t,2),h=Math.pow(a-e,2),c=Math.sqrt(s+h);if(clearInterval(g),c>=d&&v>=c){var r=n,l=null;l=o.speed>0?{r:0,g:0,b:255}:{r:255,g:0,b:0},g=fade(r,l,2e3),o.speed*=-1}},this.drawDebug=function(){t.fillStyle="blue",t.beginPath(),t.arc(i,a,1,0,2*Math.PI,!0),t.closePath(),t.fill(),t.fillStyle="blue",t.beginPath(),t.arc(i+e+(h-h/2),a,1,0,2*Math.PI,!0),t.arc(i+e-(h-h/2),a,1,0,2*Math.PI,!0),t.closePath(),t.fill()}};window.addEventListener("load",eventWindowLoaded,!1);var TEST_STATE=0,START_STATE=1,Game=function(){this.canvas=null,this.context=null,this.circles=[],this.mouseX=null,this.mouseY=null,this.stateObj=null,this.gameStates=[this.testState,this.startState]};Game.prototype.init=function(){var t=this;this.canvas=document.getElementById("canvas13K"),this.canvas&&this.canvas.getContext&&(this.context=this.canvas.getContext("2d"),this.canvas.addEventListener("click",function(e){t.onMouseClick(e)},!1),this.switchGameState(START_STATE),setInterval(function(){t.stateObj.update.call(t)},33))},Game.prototype.switchGameState=function(t){this.stateObj&&this.stateObj.destroy.call(this),this.stateObj=this.gameStates[t](),this.stateObj.create.call(this)},Game.prototype.onMouseClick=function(t){this.mouseX=t.clientX-this.canvas.offsetLeft,this.mouseY=t.clientY-this.canvas.offsetTop;for(var e=0;e<this.circles.length;e++)this.circles[e].checkClick(this.mouseX,this.mouseY)},Game.prototype.drawCircles=function(){for(var t=0;t<this.circles.length;t++)this.circles[t].draw()},Game.prototype.drawTemperatureIndicator=function(){this.context.fillStyle=getRGBText({r:255,g:0,b:0}),this.context.fillRect(0,this.canvas.height-40,this.canvas.width,this.canvas.height),this.context.font="40px Sans-serif",this.context.fillStyle="#F0F0F0";var t="1Â°C",e=this.context.measureText(t);this.context.fillText(t,this.canvas.width/2-e.width/2,this.canvas.height-5)},Game.prototype.clearCanvas=function(){this.context.fillStyle="#FFFFFF",this.context.fillRect(0,0,this.canvas.width,this.canvas.height)},Game.prototype.startState=function(){return{create:function(){this.circles.push(new Circle(this.context,200,this.canvas.width/2,this.canvas.height/2,0,{r:255,g:0,b:0},8,500))},update:function(){this.clearCanvas(),this.drawCircles()},destroy:function(){this.circles=[]}}};